{% extends 'base.html' %}

{% block content %}
<div class="upload-page">
    <h1 class="mb-4">Upload Program Data</h1>
    
    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-upload me-2"></i> Upload New Program
        </div>
        <div class="card-body">
            <form action="{{ url_for('upload_program') }}" method="POST" enctype="multipart/form-data" id="uploadForm">
                <div class="mb-3">
                    <label for="program_name" class="form-label">Program Name</label>
                    <input type="text" class="form-control" id="program_name" name="program_name" required 
                           placeholder="Enter program name" pattern="[a-zA-Z0-9_\s]+"
                           title="Program name can only contain letters, numbers, spaces, and underscores">
                    <div class="form-text">
                        Use a unique name for your program. If a program with this name already exists, it will be overwritten.
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="program_file" class="form-label">Program Data File</label>
                    <input type="file" class="form-control" id="program_file" name="program_file" required accept=".csv,.xlsx">
                    <div class="form-text">
                        Upload a .csv or .xlsx file containing candidate data. The file must include all required columns.
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary" id="uploadButton">
                    <i class="fas fa-upload me-2"></i> Upload Program Data
                </button>
                
                <div class="progress mt-3" style="height: 25px; display: none;" id="uploadProgress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                </div>
            </form>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <i class="fas fa-info-circle me-2"></i> Required Columns
        </div>
        <div class="card-body">
            <p class="card-text">
                Your uploaded file must contain the following columns:
            </p>
            
            <div class="accordion mb-4" id="requiredColumnsAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            Required Columns with Accepted Variations
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#requiredColumnsAccordion">
                        <div class="accordion-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-group mb-3">
                                        <li class="list-group-item">
                                            <strong>Candidate ID</strong>
                                            <small class="d-block text-muted">Also accepts: CandidateID, ID, Candidate_ID, Applicant ID</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>First Name</strong>
                                            <small class="d-block text-muted">Also accepts: FirstName, First_Name, Name, Given Name, First</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Surname</strong>
                                            <small class="d-block text-muted">Also accepts: Last Name, LastName, Last_Name, Family Name</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>South African ID Number</strong>
                                            <small class="d-block text-muted">Also accepts: SA ID Number, ID Number, SA_ID, National ID, Identity Number</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Age</strong>
                                            <small class="d-block text-muted">Also accepts: Years</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Email Address</strong>
                                            <small class="d-block text-muted">Also accepts: Email, E-mail, EmailAddress, Contact Email</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Contact Numbers</strong>
                                            <small class="d-block text-muted">Also accepts: Phone, Mobile, Telephone, Contact Number, Phone Number, Cell Number</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Home Language</strong>
                                            <small class="d-block text-muted">Also accepts: Language, Mother Tongue, First Language</small>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-group mb-3">
                                        <li class="list-group-item">
                                            <strong>Province and Suburb</strong>
                                            <small class="d-block text-muted">Also accepts: Address, Location, Residence, Region, Province, Suburb</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Race</strong>
                                            <small class="d-block text-muted">Also accepts: Ethnicity</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Gender</strong>
                                            <small class="d-block text-muted">Also accepts: Sex</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Disability Status</strong>
                                            <small class="d-block text-muted">Also accepts: Disability, PWD Status, PWD, Disabled</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Highest Qualification</strong>
                                            <small class="d-block text-muted">Also accepts: Qualification, Education, Degree, Academic Qualification</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>NQF Level</strong>
                                            <small class="d-block text-muted">Also accepts: NQF, Qualification Level, Education Level</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Qualification Field</strong>
                                            <small class="d-block text-muted">Also accepts: Field of Study, Study Field, Discipline, Major</small>
                                        </li>
                                        <li class="list-group-item">
                                            <strong>Institution Name</strong>
                                            <small class="d-block text-muted">Also accepts: Institution, University, College, School, Academy</small>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Optional Columns
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#requiredColumnsAccordion">
                        <div class="accordion-body">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <strong>Employment Status</strong>
                                    <small class="d-block text-muted">Also accepts: Employment, Job Status, Working Status, Employed</small>
                                </li>
                                <li class="list-group-item">
                                    <strong>If Disability Status is "Yes":</strong> Valid doctor's note, Nature of Disability
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}
